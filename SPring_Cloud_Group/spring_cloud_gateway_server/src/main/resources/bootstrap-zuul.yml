########################## 脱离eureka让zuul结合ribbon实现路由负载均衡  ##########################
#当stripPrefix=true的时候 （http://127.0.0.1:8181/api/user/list -> http://192.168.1.100:8080/user/list）
#当stripPrefix=false的时候（http://127.0.0.1:8181/api/user/list -> http://192.168.1.100:8080/api/user/list）
zuul:
  routes:
    spring-cloud-micouser-server:
      sevice-id: spring-cloud-micouser-server
      path: /user/** # 这里指代将访问ribon的路径代理到指定的服务中，如果访问的服务设定了context-path，可以理解为去掉path前面的路径，替换成访问的服务路径
      strip-Prefix: true
      stripPrefix: true
  host:
    max-per-route-connections: 1024
    max-total-connections: 1024
    socket-timeout-millis: 240000
    connect-timeout-millis: 240000
  SendErrorFilter:
    error:
      disable: false
spring-cloud-micouser-server:
  ribbon:
    ReadTimeout: 50000
    ConnectTimeout: 50000
    NIWSServerListClassName: com.netflix.loadbalancer.ConfigurationBasedServerList
    NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RandomRule     #Ribbon LB Strategy
    listOfServers: 127.0.0.1:6100,localhost:6101     #client services for Ribbon LB
---
hystrix:
  command:
    default:
      execution:
        timeout:
          enabled: false
        isolation:
          strategy: THREAD
          thread:
            timeoutInMilliseconds: 600000
feign:
  hystrix:
    enabled: true
ribbon:
  eureka:
    enabled: false # 禁止ribbon 使用 eureka
ribbon.eureka.enabled: false